<?xml version="1.0"?>
<launch>

      <node pkg="carrobot" type="carrobot_node.py" name="carrobot" output="screen">
        <param name="base_lidar_x" value="0.098"/>
        <param name="base_lidar_y" value="0.0"/>
        <param name="base_lidar_z" value="0.08"/>
      </node>

      <node pkg="xv_11_laser_driver" type="neato_laser_publisher" name="neato_laser" output="screen">
          <param name="~port" value="/dev/ttyUSB0"/>
      </node>

      <arg name="dev" default="/dev/ttyS0"/>
      <arg name="baud" default="38400"/>
      <arg name="address" default="128"/>
      <arg name="max_speed" default="2.0"/>
      <arg name="ticks_per_meter" default="30307.692307692305"/>
      <arg name="base_width" default="0.155"/>
      <arg name="run_diag" default="true"/>

      <node if="$(arg run_diag)" pkg="roboclaw_node" type="roboclaw_node.py" name="roboclaw_node">
          <param name="~dev" value="$(arg dev)"/>
          <param name="~baud" value="$(arg baud)"/>
          <param name="~address" value="$(arg address)"/>
          <param name="~max_speed" value="$(arg max_speed)"/>
          <param name="~ticks_per_meter" value="$(arg ticks_per_meter)"/>
          <param name="~base_width" value="$(arg base_width)"/>
      </node>

      <node pkg="diagnostic_aggregator" type="aggregator_node"
            name="diagnostic_aggregator">
          <rosparam command="load"
                    file="$(find roboclaw_node)/config/roboclaw_diag.yaml"/>
      </node>


      	<arg name="enable_raw" default="false"/>
        <arg name="camera_id" default="0"/>
        <arg name="camera_frame_id" default="raspicam"/>
        <arg name="camera_name" default="camerav1_1280x720"/>

        <node type="raspicam_node" pkg="raspicam_node" name="raspicam_node" output="screen">
        	<param name="camera_frame_id" value="$(arg camera_frame_id)"/>
        	<param name="enable_raw" value="$(arg enable_raw)"/>
          <param name="camera_id" value="$(arg camera_id)"/>

          <param name="camera_info_url" value="package://raspicam_node/camera_info/camerav1_1280x720.yaml"/>
          <param name="camera_name" value="$(arg camera_name)"/>
          <param name="width" value="1280"/>
          <param name="height" value="720"/>
          <!-- We are running at 90fps to reduce motion blur -->
          <param name="framerate" value="90"/>
        </node>

    <node pkg="move_base" type="move_base" name="move_base" output="screen">
    </node>

    <node pkg="explore_lite" type="explore" respawn="false" name="explore" output="screen">
      <param name="robot_base_frame" value="base_link"/>
      <param name="costmap_topic" value="map"/>
      <param name="costmap_updates_topic" value="map_updates"/>
      <param name="visualize" value="true"/>
      <param name="planner_frequency" value="0.33"/>
      <param name="progress_timeout" value="30.0"/>
      <param name="potential_scale" value="3.0"/>
      <param name="orientation_scale" value="0.0"/>
      <param name="gain_scale" value="1.0"/>
      <param name="transform_tolerance" value="0.3"/>
      <param name="min_frontier_size" value="0.75"/>
    </node>


    <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" output="screen">
      <param name="map_update_interval" value="5.0"/>
      <param name="maxUrange" value="16.0"/>
      <param name="sigma" value="0.05"/>
      <param name="kernelSize" value="1"/>
      <param name="lstep" value="0.05"/>
      <param name="astep" value="0.05"/>
      <param name="iterations" value="5"/>
      <param name="lsigma" value="0.075"/>
      <param name="ogain" value="3.0"/>
      <param name="lskip" value="0"/>
      <param name="srr" value="0.1"/>
      <param name="srt" value="0.2"/>
      <param name="str" value="0.1"/>
      <param name="stt" value="0.2"/>
      <param name="linearUpdate" value="1.0"/>
      <param name="angularUpdate" value="0.5"/>
      <param name="temporalUpdate" value="3.0"/>
      <param name="resampleThreshold" value="0.5"/>
      <param name="particles" value="30"/>
      <param name="xmin" value="-50.0"/>
      <param name="ymin" value="-50.0"/>
      <param name="xmax" value="50.0"/>
      <param name="ymax" value="50.0"/>
      <param name="delta" value="0.05"/>
      <param name="llsamplerange" value="0.01"/>
      <param name="llsamplestep" value="0.01"/>
      <param name="lasamplerange" value="0.005"/>
      <param name="lasamplestep" value="0.005"/>
    </node>

</launch>
